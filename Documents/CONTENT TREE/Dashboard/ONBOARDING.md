# Content Tree Dashboard — Як це працює

Цей документ пояснює як працює кожний розділ Dashboard, які формули використовуються і як відбувається синхронізація.

---

## Як відкрити Dashboard

**Онлайн (для всіх):**
https://marakinpoetry.github.io/content-tree-dashboard/

**Локально (для розробника):**
```bash
cd "Documents/CONTENT TREE"
make dashboard
# відкрий http://localhost:8080
```

---

## Як працює синхронізація

```
  КРОК 1: Колега працює локально
  ─────────────────────────────────────────────────

    Комп колеги
    ┌──────────────────────────┐
    │  Локальна папка Content/ │
    │  (Google Drive Desktop)  │
    │                          │
    │  + новий-файл.md         │──── автоматично ────┐
    │  ~ змінений-файл.md      │                     │
    └──────────────────────────┘                     │
                                                     │
         Google Drive Desktop синхронізує             │
         файли автоматично в реальному часі           │
                                                     ▼

  КРОК 2: Файл потрапляє в Google Drive
  ─────────────────────────────────────────────────

                    GOOGLE DRIVE (хмара)
    ┌──────────────────────────────────────────┐
    │                                          │
    │  Спільна папка Content/                  │
    │  ├── WS 1.0/                             │
    │  │   ├── Pre-Registration/               │
    │  │   ├── Trial/                          │
    │  │   └── Success_Client/                 │
    │  └── WS 2.0 Release/                    │
    │                                          │
    │  Це єдине джерело правди для всіх        │
    │                                          │
    └────────┬──────────────┬──────────────────┘
             │              │
             │              │
      ┌──────┘              └──────┐
      ▼                            ▼

  КРОК 3a: GitHub Actions           КРОК 3b: Твоя локальна
  (автоматично кожні 3 год)         копія (вручну)
  ─────────────────────────         ─────────────────────────

  GitHub Actions                     Твій комп
  ┌─────────────────────┐           ┌─────────────────────┐
  │                     │           │                     │
  │  rclone sync        │           │  make sync-pull     │
  │  Google Drive       │           │  (rclone sync)      │
  │       ↓             │           │       ↓             │
  │  Content/ в репо    │           │  Content/ локально  │
  │                     │           │                     │
  └─────────┬───────────┘           └─────────────────────┘
            │
            ▼

  КРОК 4: Побудова бази даних (в GitHub Actions)
  ─────────────────────────────────────────────────

  ┌─────────────────────────────────────────────────────┐
  │                                                     │
  │  Content/  -->  init_db.py   створює пусту SQLite   │
  │       606 файлів    │                               │
  │                     ▼                               │
  │              sync.py         сканує файли,          │
  │                │             витягує метадані,       │
  │                │             будує FTS індекс        │
  │                ▼                                     │
  │              content.db      606 записів            │
  │                │             417 прогалин            │
  │                ▼                                     │
  │              export.py       БД --> data.json        │
  │                │                                     │
  │                ▼                                     │
  │              Dashboard/data.json  (548 KB)          │
  │                                                     │
  └─────────────────────┬───────────────────────────────┘
                        │
                        ▼

  КРОК 5: Деплой на GitHub Pages
  ─────────────────────────────────────────────────

  ┌─────────────────────────────────────────────────────┐
  │                                                     │
  │  GitHub Pages                                       │
  │  marakinpoetry.github.io/content-tree-dashboard/    │
  │                                                     │
  │  Dashboard/index.html  +  Dashboard/data.json       │
  │                                                     │
  │  Доступний всім по посиланню, без паролю            │
  │                                                     │
  └─────────────────────────────────────────────────────┘


  ПОВНИЙ ЦИКЛ ЗА ЧАСОМ
  ─────────────────────────────────────────────────

  00:00   Колега зберігає файл у свою папку
  00:01   Google Drive Desktop синхронізує в хмару
  ~3 год  GitHub Actions запускається за розкладом
          ├── rclone тягне файли з Google Drive
          ├── init_db --> sync --> export
          ├── commit + push
          └── deploy на GitHub Pages
  ~3:02   Dashboard оновлений, всі бачать зміни


  ХТО ЩО БАЧИТЬ
  ─────────────────────────────────────────────────

  Колега 1  -->  Google Drive (папка)     одразу
  Колега 2  -->  Google Drive (папка)     одразу
  Колега 3  -->  Google Drive (папка)     одразу
  Всі       -->  Dashboard (метрики)      до 3 годин
  Ти        -->  Локальна папка           make sync-pull
  Ти        -->  CLI пошук               make search q=...
```

---

## Бічна панель (Sidebar)

Зліва внизу показується покриття контентом окремо для кожного продукту.

**Що рахується:**

Кожна комбінація `тема × тип контенту × мова` — це один "слот". Якщо для цієї комбінації є хоча б один файл — слот заповнений.

**Формула:**

```
Всього слотів = 62 теми × 4 типи × 2 основні мови = 496

Типи: article, landing, video, smm
Основні мови: ua, en

Покриття = (заповнені слоти / 496) × 100%
```

**Приклад:**
- WS 1.0: 79 заповнених слотів з 496 = 15.9%
- WS 2.0: 0 заповнених слотів з 496 = 0.0%

WS 1.0 і WS 2.0 рахуються окремо — файл в WS 1.0 не зараховується для WS 2.0.

---

## Вкладка "Огляд" (Overview)

### 4 картки метрик

| Картка | Що показує | Як рахує |
|--------|-----------|----------|
| Total Files | Загальна кількість файлів | Кількість записів в базі |
| Published | Опубліковані файли | Файли зі статусом `published` |
| Drafts | Чернетки | `total - published` |
| Content Gaps | Прогалини | Кількість порожніх слотів (topic × type × lang) |

При переключенні на WS 1.0 / WS 2.0 Release — фільтрує тільки файли цього продукту.

### Воронка по стадіях (Product Funnel)

Для WS 1.0 показує 3 стадії шляху клієнта:

| Стадія | Що це |
|--------|-------|
| Pre-Registration | Контент для залучення (TOFU) |
| Trial | Контент для онбордингу (MOFU) |
| Success_Client | Контент для утримання (BOFU) |

Кожна стадія розбита на 5 категорій: Features, Business_Types, Competitors, Pains, PM_Education.

**Формула покриття категорії:**
```
покриття = (кількість тем з файлами / загальна кількість тем) × 100%
```

**Кольори:**
- Синій — покриття >= 60%
- Жовтий — покриття 30-59%
- Червоний — покриття < 30%

### Мови (Languages)

Горизонтальні бари для всіх 9 мов: UA, EN, RU, PL, PT, FR, IT, RO, KZ.

Показує кількість файлів кожною мовою. Мови з 0 файлів теж відображаються (щоб було видно прогалини).

### Остання активність (Recent Activity)

5 останніх змінених файлів, відсортованих за датою. Клік по імені файлу відкриває його в Google Drive.

---

## Вкладка "Дерево" (Tree)

Інтерактивна візуалізація структури контенту у вигляді дерева (D3.js).

**Ієрархія:**
```
Продукт
  └── Стадія
      └── Категорія
          └── Тема
              └── Файли (макс. 4 показуються)
```

**Кольори нод:**
- Зелений — папка має файли
- Червоний — папка порожня
- Фіолетовий — файл

**Взаємодія:**
- Клік по папці — розгорнути/згорнути
- Клік по файлу — відкрити в Google Drive

---

## Вкладка "Матриця" (Matrix)

Таблиця покриття: рядки = теми, стовпці = типи контенту.

**Що в комірках:**
- Зелена з числом — є файли (число = кількість)
- Червона з "—" — немає файлів (прогалина)

**Фільтри:**
- Продукт: All / WS 1.0 / WS 2.0 / WS 2.0 Release
- Мова: фільтрує по конкретній мові
- Стадія: Pre-Registration / Trial / Success_Client

**6 типів контенту в матриці:**
article, landing, video, static_ad, video_ad, smm

Категорії (Features, Business_Types тощо) згорнуті за замовчуванням — натисни щоб розгорнути.

---

## Вкладка "Файли" (Files)

Таблиця всіх файлів з фільтрами і пошуком.

**Стовпці:** Name | Category | Topic | Type | Language | Status | Size

**Фільтри (мультивибір):**
- Category (Features, Business_Types, ...)
- Topic (Gantt_Chart, Kanban, ...)
- Format (article, landing, video, ...)
- Language (UA, EN, RU, ...)
- Status (published, draft)

**Пошук:** шукає по імені файлу та заголовку

**Сортування:** клік по заголовку стовпця (стрілка вгору/вниз)

**Пагінація:** 30 файлів на сторінку

**Клік по файлу:** відкриває в Google Drive (якщо є посилання)

---

## Вкладка "Прогалини" (Gaps)

Показує які комбінації тема × тип × мова ще не мають контенту.

### Формула пріоритету

Кожна прогалина має оцінку важливості:

```
Score = вага категорії × вага мови
```

**Ваги категорій:**

| Категорія | Вага | Чому |
|-----------|------|------|
| Features | 5 | Ключові можливості продукту, найбільший вплив на конверсію |
| Competitors | 4 | Критично для стадії вибору — клієнт порівнює альтернативи |
| Business_Types | 3 | Релевантність для конкретних індустрій |
| Pains | 2 | Емоційний зв'язок з проблемами клієнта |
| PM_Education | 1 | Органічний трафік, експертність |

**Ваги мов:**

| Мова | Вага | Чому |
|------|------|------|
| UA | 3 | Основний ринок |
| EN | 3 | Глобальний охват |
| RU | 2 | Вторинний ринок |
| PL, PT, FR, IT, RO, KZ | 1 | Ринки розширення |

**Приклади:**
- Features × UA = 5 × 3 = **15** (найвищий пріоритет)
- Features × PL = 5 × 1 = **5**
- PM_Education × KZ = 1 × 1 = **1** (найнижчий пріоритет)

### Рівні пріоритету

| Рівень | Колір | Що означає |
|--------|-------|-----------|
| Critical | Червоний | Найважливіші прогалини, закривати першими |
| High | Жовтий | Важливі, але не терміново |
| Medium | Сірий | Середній пріоритет |
| Low | Світло-сірий | Можна відкласти |

**Фільтри:**
- Severity: Critical / High / Medium / Low
- Language: конкретна мова
- Category: конкретна категорія
- Product: WS 1.0 / WS 2.0

Клік на прогалину розгортає пояснення з формулою розрахунку.

---

## Огляд папок (Folder Browser)

Відкривається при кліку на стадію у воронці (Overview).

Показує дерево папок: Категорія → Тема → Файли.

**Кольори:**
- Синя іконка — папка з файлами
- Червона іконка — порожня папка

**Навігація:**
- Клік по папці — увійти всередину
- Кнопка "назад" — повернутися
- Клік по файлу — відкрити в Google Drive

---

## Довідка

| Термін | Значення |
|--------|----------|
| Слот | Одна комбінація тема × тип × мова |
| Покриття | Відсоток заповнених слотів |
| Прогалина (Gap) | Слот без жодного файлу |
| Стадія | Етап шляху клієнта (Pre-Registration → Trial → Success_Client) |
| Категорія | Тематичний блок (Features, Competitors, тощо) |
| Тема (Topic) | Конкретна тема всередині категорії (Gantt_Chart, Trello, тощо) |
| Тип контенту | Формат: стаття, лендінг, відео, реклама, SMM |
| Primary мова | UA та EN — основні мови для розрахунку покриття |
